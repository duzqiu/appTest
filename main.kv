#:import MDLabel kivymd.uix.label.MDLabel

BoxLayout:
    orientation: 'vertical'
    
    MDBottomNavigation:
        # 第一个标签页
        MDBottomNavigationItem:
            name: 'screen1'
            text: 'Home'
            icon: 'home'  
            md_bg_color: [0.8, 0.8, 0.8, 1]  # 灰色背景 
            BoxLayout:
                orientation: "vertical"

                # 标题栏示例
                Label:
                    text: '标题栏'
                    size_hint_y: None
                    height: '48dp'
                    font_name: "fonts/pingfang-hei.ttf"
                    canvas.before:
                        Color:
                            rgba: [0.9, 0.9, 0.9, 0.5]  # 背景
                        Rectangle:
                            pos: self.pos
                            size: self.size
                # 分隔条
                Widget:
                    size_hint_y: None
                    height: '2dp'  # 设置分隔条的高度
                    canvas.before:
                        Color:
                            rgba: [0.7, 0.7, 0.7, 1]  # 深灰色
                        Rectangle:
                            pos: self.pos
                            size: self.size

                # Banner 区域
                MDSwiper:
                    id: swiper
                    size_hint_y: None
                    height: "150dp"
                    canvas.before:
                        # 设置背景颜色
                        Color:
                            rgba: [1, 1, 1, 1]  # 背景色
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [15, 15, 15, 15]
                        # 设置边框
                        Color:
                            rgba: [0.9, 0.9, 0.9, 0.5]  # 边框颜色
                        Line:
                            rounded_rectangle: [self.x, self.y, self.width, self.height, 15]
                            width: 2
                # 分隔条
                Widget:
                    size_hint_y: None
                    height: '2dp'  # 设置分隔条的高度
                    canvas.before:
                        Color:
                            rgba: [0.7, 0.7, 0.7, 1]  # 深灰色
                        Rectangle:
                            pos: self.pos
                            size: self.size

                # 页面内容区域
                ScrollView:
                    bar_width: "3dp"
                    bar_color: [0.7, 0.7, 0.7, 1]  # 滚动条颜色和透明度
                    
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        
                        # 创建多个等高的区域
                        GridLayout:
                            cols: 1
                            size_hint_y: None
                            height: self.minimum_height
                            
                            Button:
                                text: '区域 1'
                                font_name: "fonts/pingfang-hei.ttf"
                                size_hint_y: None
                                height: '100dp'  # 固定高度
                                background_color: [0.9, 0.9, 0.9, 1]
                            Button:
                                text: '区域 2'
                                font_name: "fonts/pingfang-hei.ttf"
                                size_hint_y: None
                                height: '100dp'  # 固定高度
                                background_color: [0.8, 0.8, 0.8, 1]
                            Button:
                                text: '区域 3'
                                font_name: "fonts/pingfang-hei.ttf"
                                size_hint_y: None
                                height: '100dp'  # 固定高度
                                background_color: [0.7, 0.7, 0.7, 1]
                            Button:
                                text: '区域 4'
                                font_name: "fonts/pingfang-hei.ttf"
                                size_hint_y: None
                                height: '100dp'  # 固定高度
                                background_color: [0.6, 0.6, 0.6, 1]
                            # 主内容区域
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: '100dp' 
                                
                                # 左侧区域
                                BoxLayout:
                                    size_hint_x: 0.3
                                    Button:
                                        text: '左侧区域'
                                        font_name: "fonts/pingfang-hei.ttf"
                                        size_hint_y: 1
                                        
                                # 右侧区域
                                BoxLayout:
                                    orientation: 'vertical'
                                    size_hint_x: 0.7
                                    
                                    # 上侧区域
                                    BoxLayout:
                                        size_hint_y: 0.7
                                        Button:
                                            text: '右上区域'
                                            font_name: "fonts/pingfang-hei.ttf"
                                            size_hint: 1, 1
                                            
                                    # 下侧区域
                                    BoxLayout:
                                        size_hint_y: 0.3
                                        Button:
                                            text: '右下区域'
                                            font_name: "fonts/pingfang-hei.ttf"
                                            size_hint: 1, 1
        
        # 第二个标签页
        MDBottomNavigationItem:
            name: 'screen2'
            text: 'Search'
            icon: 'magnify'  
            md_bg_color: [0.8, 0.8, 0.8, 1]  # 灰色背景 
            MDLabel:
                text: '这里是搜索页面'
                font_name: "fonts/pingfang-hei.ttf"
                halign: 'center'
        
        # 第三个标签页
        MDBottomNavigationItem:
            orientation: 'vertical'
            name: 'screen3'
            text: 'Settings'
            icon: 'cog'
            # 自定义Canvas来添加背景图片
            canvas.before:
                Rectangle:
                    source: 'image/bgimage.jpg'  # 替换为你的图片路径
                    size: self.size
                    pos: self.pos

            # ↓↓↓ 可滑动的内容区域 ↓↓↓
            ScrollView:
                size_hint: 1, 1
                pos_hint: {"center_x": 0.5, "center_y": 0.45}  # 居中偏下一点
                do_scroll_x: False
                bar_width: 1
                scroll_type: ['bars', 'content']

                GridLayout:
                    cols: 1
                    spacing: dp(4)
                    size_hint_y: None
                    height: self.minimum_height

                    # ↓↓↓ 示例模块1 ↓↓↓
                    MDBoxLayout:
                        size_hint_y: None
                        height: dp(180)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2

                        Label:
                            text: "这是一个圆角模块1"
                            font_name: "fonts/pingfang-hei.ttf"
                            color: [0, 0, 0, 1]
                            halign: "left"
                            valign: "middle"
                            text_size: self.width, None
                            size_hint_y: None
                            height: self.texture_size[1]

                    # ↓↓↓ 示例模块2 ↓↓↓
                    MDBoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: dp(60)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2
                        spacing: "10dp"  # 板块之间间距

                        # 四个板块，每个板块占 0.25 宽度
                        MDBoxLayout:
                            size_hint_x: 0.25
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # 灰色背景
                            radius: [12, ]  # 圆角
                            padding: [10]
                            Label:
                                text: "1"
                                color: [0, 0, 0, 1]
                                halign: "center"
                                valign: "middle"

                        MDBoxLayout:
                            size_hint_x: 0.25
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # 灰色背景
                            radius: [12, ]
                            padding: [10]
                            Label:
                                text: "2"
                                color: [0, 0, 0, 1]
                                halign: "center"
                                valign: "middle"

                        MDBoxLayout:
                            size_hint_x: 0.25
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # 灰色背景
                            radius: [12, ]
                            padding: [10]
                            Label:
                                text: "3"
                                color: [0, 0, 0, 1]
                                halign: "center"
                                valign: "middle"

                        MDBoxLayout:
                            size_hint_x: 0.25
                            md_bg_color: [0.9, 0.9, 0.9, 1]  # 灰色背景
                            radius: [12, ]
                            padding: [10]
                            Label:
                                text: "4"
                                color: [0, 0, 0, 1]
                                halign: "center"
                                valign: "middle"

                    # ↓↓↓ 示例模块3（可以继续复制更多） ↓↓↓
                    MDBoxLayout:
                        size_hint_y: None
                        height: dp(80)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2

                        Label:
                            text: "这是一个圆角模块3"
                            font_name: "fonts/pingfang-hei.ttf"
                            color: [0, 0, 0, 1]
                            halign: "left"
                            valign: "middle"
                            text_size: self.width, None
                            size_hint_y: None
                            height: self.texture_size[1]
                    # ↓↓↓ 示例模块3（可以继续复制更多） ↓↓↓
                    MDBoxLayout:
                        size_hint_y: None
                        height: dp(120)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2

                        Label:
                            text: "这是一个圆角模块4"
                            font_name: "fonts/pingfang-hei.ttf"
                            color: [0, 0, 0, 1]
                            halign: "left"
                            valign: "middle"
                            text_size: self.width, None
                            size_hint_y: None
                            height: self.texture_size[1]
                    # ↓↓↓ 示例模块3（可以继续复制更多） ↓↓↓
                    MDBoxLayout:
                        size_hint_y: None
                        height: dp(180)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2

                        Label:
                            text: "这是一个圆角模块5"
                            font_name: "fonts/pingfang-hei.ttf"
                            color: [0, 0, 0, 1]
                            halign: "left"
                            valign: "middle"
                            text_size: self.width, None
                            size_hint_y: None
                            height: self.texture_size[1]
                    # ↓↓↓ 示例模块3（可以继续复制更多） ↓↓↓
                    MDBoxLayout:
                        size_hint_y: None
                        height: dp(80)
                        md_bg_color: [1, 1, 1, 1]
                        radius: [16, ]
                        padding: [16, 12]
                        elevation: 2

                        Label:
                            text: "这是一个圆角模块6"
                            font_name: "fonts/pingfang-hei.ttf"
                            color: [0, 0, 0, 1]
                            halign: "left"
                            valign: "middle"
                            text_size: self.width, None
                            size_hint_y: None
                            height: self.texture_size[1]
                            
            # 右上角图标按钮组 - 使用 AnchorLayout 实现右对齐
            AnchorLayout:
                anchor_x: 'right'
                anchor_y: 'top'
                padding: [0, 0, 40, 0]  # 右侧留出16dp边距

                BoxLayout:
                    size_hint: None, None
                    width: "130dp"       # 总宽度根据图标+间距计算
                    height: "38dp"
                    spacing: "1dp"       # 图标之间间距更小

                    MDIconButton:
                        icon: "qrcode-scan"
                        on_press: app.on_scan()
                        user_font_size: "18sp"
                        theme_text_color: "Custom"
                        text_color: [0, 0, 0, 1]

                    MDIconButton:
                        icon: "headset"
                        on_press: app.on_service()
                        user_font_size: "18sp"
                        theme_text_color: "Custom"
                        text_color: [0, 0, 0, 1]

                    MDIconButton:
                        icon: "cog"
                        on_press: app.on_settings()
                        user_font_size: "18sp"
                        theme_text_color: "Custom"
                        text_color: [0, 0, 0, 1]